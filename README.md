# 🔐 Flask 2FA Authentication System

Цей проєкт є частиною дипломної роботи й реалізує повноцінну систему автентифікації користувачів з підтримкою **двохфакторної аутентифікації (2FA)**, **реєстрацією**, **входом**, **захищеною панеллю користувача**, а також **скиданням пароля через електронну пошту** з перевіркою коду.

---

## 📌 Основний функціонал

### ✅ Реєстрація користувача
- Створення нового акаунта за email та паролем.
- Генерація унікального секретного ключа для кожного користувача для подальшої 2FA перевірки.
- Валідація введених даних.

### 🔐 Вхід до акаунта
- Користувач вводить email та пароль.
- Успішна авторизація переносить користувача на сторінку двофакторної перевірки (2FA).
- Невірні дані блокують вхід і виводять повідомлення про помилку.

### 📱 Двофакторна автентифікація (2FA)
- Генерація QR-коду з секретним ключем, який користувач сканує у додатку **Google Authenticator**.
- Після сканування користувач вводить 6-значний код для підтвердження входу.
- Успішне підтвердження відкриває доступ до захищеної частини сайту — **панелі користувача**.

### 🧾 Панель користувача (Dashboard)
- Захищена сторінка, доступна лише після авторизації та проходження 2FA.

### 🔁 Скидання пароля через email
- Користувач вводить свою пошту на сторінці скидання.
- На пошту надсилається 6-значний код.
- Користувач вводить код на тій же сторінці — і, якщо він правильний, перенаправляється на форму для введення нового пароля.
- Новий пароль зберігається у базі після хешування.

---

## ⚙️ Використані технології

- **Python 3.11+**
- **Flask** — мікрофреймворк для побудови бекенду.
- **Flask-Mail** — надсилання пошти для скидання пароля.
- **pyotp** — генерація та перевірка TOTP-кодів (2FA).
- **qrcode** — генерація QR-кодів для сканування в Google Authenticator.
- **SQLite** — локальна база даних для зберігання акаунтів.
- **Werkzeug** — безпечне хешування паролів.

---

## 🚀 Запуск локально

### 1. Клонуй репозиторій
```bash
git clone https://github.com/your-username/flask-2fa-auth.git
cd flask-2fa-auth
```

### 2. Створи та активуй віртуальне середовище
```bash
python -m venv venv
source venv/bin/activate  # або venv\Scripts\activate на Windows
```

### 3. Встанови залежності
```bash
pip install -r requirements.txt
```

### 4. Запусти застосунок
```bash
python app.py
```

---

## 📬 Налаштування поштового сервера

Щоб функція скидання пароля працювала, потрібно налаштувати Flask-Mail у `app.py`:
```python
app.config['MAIL_SERVER'] = 'smtp.gmail.com'
app.config['MAIL_PORT'] = 587
app.config['MAIL_USE_TLS'] = True
app.config['MAIL_USERNAME'] = 'your_email@gmail.com'
app.config['MAIL_PASSWORD'] = 'your_app_password'
```

> ⚠️ Якщо ти використовуєш Gmail, потрібно згенерувати **16-значний App Password** через Google Account Security (двофакторна автентифікація обов’язкова).

---

## 🧩 Структура проєкту

```
flask-2fa-auth/
│
├── templates/                # HTML-шаблони
│   ├── base.html
│   ├── login.html
│   ├── register.html
│   ├── two_factor.html
│   ├── dashboard.html
│   ├── reset_request.html
│   └── reset_password.html
│
├── app.py                    # Основна логіка застосунку
└── requirements.txt          # Залежності Python
```

---

## 🧠 Ідеї для розширення
- Повноцінна система підтвердження email під час реєстрації.
- Обмеження кількості спроб входу/2FA.
- База даних PostgreSQL або MySQL.
- Docker-версія для легкого деплойменту.
- CI/CD (GitHub Actions + Render/Vercel).

---

## 👨‍🎓 Автор

**Розробник**: Котляр Д.С  
**Робота створена в рамках дипломного проєкту**  
Фреймворк: Flask + Python  
Рік: 2025

---

## 📄 Ліцензія

Цей проєкт доступний під ліцензією MIT — користуйтесь в освітніх або власних цілях!